{"ast":null,"code":"document.addEventListener('turbolinks:load', function () {\n  var timerField = document.getElementById('timer');\n\n  if (timerField) {\n    var timerValue = timerField.dataset.timer;\n    var timerFinish = new Date(timerValue).getTime();\n    var delay = 1000;\n    setInterval(changeTimerValue, delay, timerField, timerFinish);\n  }\n});\n\nfunction changeTimerValue(timerField, timerFinish) {\n  var timeNow = new Date().getTime();\n  var timeRemain = timerFinish - timeNow;\n  var minutes = Math.floor(timeRemain / (1000 * 60) % 60);\n  var seconds = Math.floor(timeRemain % (1000 * 60) / 1000);\n  minutes = checkTime(minutes);\n  seconds = checkTime(seconds);\n  timerField.textContent = minutes + \":\" + seconds;\n\n  if (timeRemain <= 0) {\n    timerField.textContent = \"00:00\".alert(testId);\n    window.location.href = window.location.host + '/test_passages/' + testId + '/result'; //let timerId =setTimeout(function(){alert('444')}, 1000)\n    //http://localhost:3000/test_passages/156/result\n    //serverused =  window.location.host\n    //let newurl = window.location.protocol + '//' + serverused + '/test_passages/'  + '/result'\n    //newurl = \"#{window.location.protocol}//#{serverused}/sites/#{node.id}/edit\"\n    //alert(@test_passage.id)\n    //return \n    //windows.location = result_test_passage_path(@test_passage)\n  }\n}\n\nfunction checkTime(i) {\n  if (i < 10) {\n    i = \"0\" + i;\n  }\n\n  ; // add zero in front of numbers < 10\n\n  return i;\n}","map":{"version":3,"sources":["/home/viktor/Desktop/TestGuru/app/javascript/utilities/timer.js"],"names":["document","addEventListener","timerField","getElementById","timerValue","dataset","timer","timerFinish","Date","getTime","delay","setInterval","changeTimerValue","timeNow","timeRemain","minutes","Math","floor","seconds","checkTime","textContent","alert","testId","window","location","href","host","i"],"mappings":"AAAAA,QAAQ,CAACC,gBAAT,CAA2B,iBAA3B,EAA8C,YAAU;AACtD,MAAMC,UAAU,GAAGF,QAAQ,CAACG,cAAT,CAAwB,OAAxB,CAAnB;;AAEE,MAAID,UAAJ,EAAgB;AACZ,QAAME,UAAU,GAAGF,UAAU,CAACG,OAAX,CAAmBC,KAAtC;AACA,QAAIC,WAAW,GAAG,IAAIC,IAAJ,CAASJ,UAAT,EAAqBK,OAArB,EAAlB;AACA,QAAIC,KAAK,GAAG,IAAZ;AACAC,IAAAA,WAAW,CAACC,gBAAD,EAAmBF,KAAnB,EAA0BR,UAA1B,EAAsCK,WAAtC,CAAX;AACH;AACJ,CATD;;AAWA,SAASK,gBAAT,CAA0BV,UAA1B,EAAsCK,WAAtC,EAAmD;AAC/C,MAAIM,OAAO,GAAG,IAAIL,IAAJ,GAAWC,OAAX,EAAd;AACA,MAAIK,UAAU,GAAGP,WAAW,GAAGM,OAA/B;AAEA,MAAIE,OAAO,GAAGC,IAAI,CAACC,KAAL,CAAYH,UAAU,IAAI,OAAO,EAAX,CAAX,GAA6B,EAAxC,CAAd;AACA,MAAII,OAAO,GAAGF,IAAI,CAACC,KAAL,CAAYH,UAAU,IAAI,OAAO,EAAX,CAAX,GAA6B,IAAxC,CAAd;AAEAC,EAAAA,OAAO,GAAGI,SAAS,CAACJ,OAAD,CAAnB;AACAG,EAAAA,OAAO,GAAGC,SAAS,CAACD,OAAD,CAAnB;AAEAhB,EAAAA,UAAU,CAACkB,WAAX,GAAyBL,OAAO,GAAG,GAAV,GAAgBG,OAAzC;;AAEA,MAAIJ,UAAU,IAAI,CAAlB,EAAqB;AACjBZ,IAAAA,UAAU,CAACkB,WAAX,GAAyB,QACzBC,KADyB,CACnBC,MADmB,CAAzB;AAEAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAsBF,MAAM,CAACC,QAAP,CAAgBE,IAAhB,GAAuB,iBAAvB,GAA2CJ,MAA3C,GAAoD,SAA1E,CAHiB,CAIjB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;;AAED,SAASH,SAAT,CAAmBQ,CAAnB,EAAsB;AACpB,MAAIA,CAAC,GAAG,EAAR,EAAY;AAACA,IAAAA,CAAC,GAAG,MAAMA,CAAV;AAAY;;AAAA,GADL,CACQ;;AAC5B,SAAOA,CAAP;AACD","sourcesContent":["document.addEventListener ('turbolinks:load', function(){\n  const timerField = document.getElementById('timer')\n\n    if (timerField) {\n        const timerValue = timerField.dataset.timer\n        let timerFinish = new Date(timerValue).getTime()\n        let delay = 1000\n        setInterval(changeTimerValue, delay, timerField, timerFinish)\n    }\n})\n\nfunction changeTimerValue(timerField, timerFinish) {\n    let timeNow = new Date().getTime()\n    let timeRemain = timerFinish - timeNow\n\n    let minutes = Math.floor((timeRemain / (1000 * 60)) % 60)\n    let seconds = Math.floor((timeRemain % (1000 * 60)) / 1000)\n\n    minutes = checkTime(minutes)\n    seconds = checkTime(seconds)\n\n    timerField.textContent = minutes + \":\" + seconds\n\n    if (timeRemain <= 0) {\n        timerField.textContent = \"00:00\".\n        alert(testId)\n        window.location.href =window.location.host + '/test_passages/' + testId + '/result';\n        //let timerId =setTimeout(function(){alert('444')}, 1000)\n\n        //http://localhost:3000/test_passages/156/result\n        //serverused =  window.location.host\n        //let newurl = window.location.protocol + '//' + serverused + '/test_passages/'  + '/result'\n        //newurl = \"#{window.location.protocol}//#{serverused}/sites/#{node.id}/edit\"\n        //alert(@test_passage.id)\n        //return \n        //windows.location = result_test_passage_path(@test_passage)\n    }\n}\n\nfunction checkTime(i) {\n  if (i < 10) {i = \"0\" + i};  // add zero in front of numbers < 10\n  return i;\n}"]},"metadata":{},"sourceType":"module"}