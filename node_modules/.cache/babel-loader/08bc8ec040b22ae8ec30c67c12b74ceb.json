{"ast":null,"code":"document.addEventListener('turbolinks:load', function () {\n  var control = document.querySelector('.sort-by-title');\n\n  if (control) {\n    control.addEventListener('click', sortRowsByTitle);\n  }\n});\n\nfunction sortRowsByTitle() {\n  var table = document.querySelector('table'); //NodeList\n  //https://developer.mozilla.org/ru/docs/Web/API/NodeList\n\n  var rows = table.querySelectorAll('tr');\n  var sortedRows = []; //select all table rows except the first one which is the header\n\n  for (var i = 1; i < rows.length; i++) {\n    sortedRows.push(rows[i]);\n  }\n\n  if (this.querySelector('.octicon-arrow-up').classList.contains('hide')) {\n    sortedRows.sort(compareRowsAsc);\n    this.querySelector('.octicon-arrow-up').classList.remove('hide');\n    this.querySelector('.octicon-arrow-down').classList.add('hide');\n  } else {\n    sortedRows.sort(compareRowsDesc);\n    this.querySelector('.octicon-arrow-down').classList.remove('hide');\n    this.querySelector('.octicon-arrow-up').classList.add('hide');\n  }\n\n  var sortedTable = document.createElement('table');\n  var thead = document.createElement('thead');\n  sortedTable.appendChild(thead);\n  thead.appendChild(rows[0]);\n  var sortTBody = document.createElement('tbody');\n  sortTBody.classList.add('table');\n  sortTBody.classList.add('table-striped');\n\n  for (var i = 0; i < sortedRows.length; i++) {\n    sortTBody.appendChild(sortedRows[i]);\n  } //sortedTable.appendChild(tbody)\n\n\n  table.parentNode.replaceChild(sortTBody, table);\n}\n\nfunction compareRowsAsc(row1, row2) {\n  var testTitle1 = row1.querySelector('td').textContent;\n  var testTitle2 = row2.querySelector('td').textContent;\n\n  if (testTitle1 < testTitle2) {\n    return -1;\n  }\n\n  if (testTitle1 > testTitle2) {\n    return 1;\n  }\n\n  return 0;\n}\n\nfunction compareRowsDesc(row1, row2) {\n  var testTitle1 = row1.querySelector('td').textContent;\n  var testTitle2 = row2.querySelector('td').textContent;\n\n  if (testTitle1 < testTitle2) {\n    return 1;\n  }\n\n  if (testTitle1 > testTitle2) {\n    return -1;\n  }\n\n  return 0;\n}","map":{"version":3,"sources":["/home/viktor/Desktop/TestGuru/app/javascript/utilities/sorting.js"],"names":["document","addEventListener","control","querySelector","sortRowsByTitle","table","rows","querySelectorAll","sortedRows","i","length","push","classList","contains","sort","compareRowsAsc","remove","add","compareRowsDesc","sortedTable","createElement","thead","appendChild","sortTBody","parentNode","replaceChild","row1","row2","testTitle1","textContent","testTitle2"],"mappings":"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","sourcesContent":["document.addEventListener('turbolinks:load', function(){\n  var control = document.querySelector('.sort-by-title')\n  \n  if (control) {control.addEventListener('click', sortRowsByTitle)}\n})\n\nfunction sortRowsByTitle(){\n  var table = document.querySelector('table')\n\n  //NodeList\n  //https://developer.mozilla.org/ru/docs/Web/API/NodeList\n  var rows = table.querySelectorAll('tr')\n  var sortedRows = []\n\n  //select all table rows except the first one which is the header\n  for (var i = 1; i < rows.length; i++) {\n    sortedRows.push(rows[i])\n  }\n\n\n  if (this.querySelector('.octicon-arrow-up').classList.contains('hide')) {\n    sortedRows.sort(compareRowsAsc) \n    this.querySelector('.octicon-arrow-up').classList.remove('hide')\n    this.querySelector('.octicon-arrow-down').classList.add('hide')\n  } else {\n    sortedRows.sort(compareRowsDesc) \n    this.querySelector('.octicon-arrow-down').classList.remove('hide')\n    this.querySelector('.octicon-arrow-up').classList.add('hide')\n  }\n  \n\n  var sortedTable = document.createElement('table')\n  \n  var thead = document.createElement('thead')\n  sortedTable.appendChild(thead)\n  thead.appendChild(rows[0])\n\n  var sortTBody = document.createElement('tbody')\n  sortTBody.classList.add('table')\n  sortTBody.classList.add('table-striped')\n  for (var i = 0; i < sortedRows.length; i++) {\n    sortTBody.appendChild(sortedRows[i])\n  }\n  //sortedTable.appendChild(tbody)\n  table.parentNode.replaceChild(sortTBody, table)\n\n}\n\n  function compareRowsAsc(row1, row2) {\n    var testTitle1 = row1.querySelector('td').textContent\n    var testTitle2 = row2.querySelector('td').textContent\n\n    if(testTitle1 < testTitle2) { return -1}\n    if(testTitle1 > testTitle2) { return 1}\n    return 0\n  }\n\n  function compareRowsDesc(row1, row2) {\n    var testTitle1 = row1.querySelector('td').textContent\n    var testTitle2 = row2.querySelector('td').textContent\n\n    if(testTitle1 < testTitle2) { return 1}\n    if(testTitle1 > testTitle2) { return -1}\n    return 0\n  }\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}